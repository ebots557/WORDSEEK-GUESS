from pyrogram import Client, filters
from pyrogram.types import InlineKeyboardMarkup, InlineKeyboardButton
import os

# Owner ID environmental variables se uthayega
OWNER_ID = int(os.environ.get("OWNER_ID", "0"))

@Client.on_message(filters.command("help"))
async def help_cmd(client, message):
    text = """
‚ñ∂ **…¢ Ä·¥è·¥ú·¥ò s·¥á·¥õ·¥õ…™…¥…¢s (·¥Ä·¥Ö·¥ç…™…¥ ·¥è…¥ ü è)**

**·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥á·¥Ö ·¥ús·¥á Äs**
/seekauth ‚Äì ·¥ç·¥Ä…¥·¥Ä…¢·¥á ·¥ús·¥á Äs ·¥° ú·¥è ·¥Ñ·¥Ä…¥ ·¥á…¥·¥Ö …¢·¥Ä·¥ç·¥ás ·¥°…™·¥õ ú·¥è·¥ú·¥õ ·¥Ä ·¥†·¥è·¥õ·¥á.

**·¥ús·¥Ä…¢·¥á:**
‚Ä¢ `/seekauth @username` ‚Äì ·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥á ·¥Ä ·¥ús·¥á Ä
‚Ä¢ `/seekauth remove @username` ‚Äì  Ä·¥á·¥ç·¥è·¥†·¥á ·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥Ä·¥õ…™·¥è…¥
‚Ä¢ `/seekauth list` ‚Äì  ü…™s·¥õ ·¥Ä ü ü ·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥á·¥Ö ·¥ús·¥á Äs

 è·¥è·¥ú ·¥Ñ·¥Ä…¥ ·¥Ä üs·¥è ·¥ús·¥á ·¥Ä ·¥ús·¥á Ä …™·¥Ö ·¥è Ä  Ä·¥á·¥ò ü è ·¥õ·¥è ·¥Ä ·¥ç·¥áss·¥Ä…¢·¥á …™…¥s·¥õ·¥á·¥Ä·¥Ö ·¥è“ì `@username`.

**…¢·¥Ä·¥ç·¥á ·¥õ·¥è·¥ò…™·¥Ñ (“ì·¥è Ä·¥ú·¥ç …¢ Ä·¥è·¥ú·¥òs)**
/setgametopic ‚Äì  Ä·¥ás·¥õ Ä…™·¥Ñ·¥õ …¢·¥Ä·¥ç·¥ás ·¥õ·¥è ·¥è…¥·¥á ·¥è Ä ·¥ç·¥è Ä·¥á ·¥õ·¥è·¥ò…™·¥Ñs
 Ä·¥ú…¥ ·¥õ ú…™s ·¥Ñ·¥è·¥ç·¥ç·¥Ä…¥·¥Ö _…™…¥s…™·¥Ö·¥á ·¥õ ú·¥á ·¥õ·¥è·¥ò…™·¥Ñ_ ·¥° ú·¥á Ä·¥á  è·¥è·¥ú ·¥°·¥Ä…¥·¥õ …¢·¥Ä·¥ç·¥ás ·¥õ·¥è  ô·¥á ·¥ò ü·¥Ä è·¥á·¥Ö.
·¥Ä“ì·¥õ·¥á Ä s·¥á·¥õ·¥õ…™…¥…¢, ·¥õ ú·¥á  ô·¥è·¥õ ·¥°…™ ü ü ·¥è…¥ ü è  Ä·¥ú…¥ …¢·¥Ä·¥ç·¥ás …™…¥ ·¥õ ú·¥Ä·¥õ ·¥õ·¥è·¥ò…™·¥Ñ.

/unsetgametopic ‚Äì  Ä·¥á·¥ç·¥è·¥†·¥á ·¥õ·¥è·¥ò…™·¥Ñ  Ä·¥ás·¥õ Ä…™·¥Ñ·¥õ…™·¥è…¥
**·¥ús·¥Ä…¢·¥á:** `/unsetgametopic`
·¥Ä“ì·¥õ·¥á Ä ·¥ú…¥s·¥á·¥õ·¥õ…™…¥…¢, ·¥õ ú·¥á  ô·¥è·¥õ ·¥Ñ·¥Ä…¥  Ä·¥ú…¥ …¢·¥Ä·¥ç·¥ás …™…¥ ·¥Ä…¥ è ·¥õ·¥è·¥ò…™·¥Ñ …™…¥ ·¥õ ú·¥á …¢ Ä·¥è·¥ú·¥ò ·¥Ä…¢·¥Ä…™…¥.
"""
    buttons = [
        [
            InlineKeyboardButton(" ú·¥è·¥° ·¥õ·¥è ·¥ò ü·¥Ä è", callback_data="how_to_play"), 
            InlineKeyboardButton(" ü·¥á·¥Ä·¥Ö·¥á Ä ô·¥è·¥Ä Ä·¥Ö & s·¥Ñ·¥è Ä·¥ás", callback_data="lb_scores")
        ],
        [
            InlineKeyboardButton("·¥è·¥°…¥·¥á Ä", url=f"tg://user?id={OWNER_ID}")
        ]
    ]
    await message.reply_text(text, reply_markup=InlineKeyboardMarkup(buttons))

@Client.on_callback_query(filters.regex("how_to_play"))
async def how_to_play(client, cb):
    text = """
‚ñ∂ ** ú·¥è·¥° ·¥õ·¥è ·¥ò ü·¥Ä è ·¥°·¥è Ä·¥Ös·¥á·¥á·¥ã**

1. s·¥õ·¥Ä Ä·¥õ ·¥Ä …¢·¥Ä·¥ç·¥á ·¥ús…™…¥…¢ /new ·¥Ñ·¥è·¥ç·¥ç·¥Ä…¥·¥Ö
2. …¢·¥ú·¥áss ·¥Ä  Ä·¥Ä…¥·¥Ö·¥è·¥ç 5- ü·¥á·¥õ·¥õ·¥á Ä ·¥°·¥è Ä·¥Ö
3. ·¥Ä“ì·¥õ·¥á Ä ·¥á·¥Ä·¥Ñ ú …¢·¥ú·¥áss,  è·¥è·¥ú' ü ü …¢·¥á·¥õ ·¥Ñ·¥è ü·¥è Ä  ú…™…¥·¥õs:
¬† ¬†üü© ·¥Ñ·¥è Ä Ä·¥á·¥Ñ·¥õ  ü·¥á·¥õ·¥õ·¥á Ä …™…¥ ·¥õ ú·¥á  Ä…™…¢ ú·¥õ s·¥ò·¥è·¥õ
¬† ¬†üü® ·¥Ñ·¥è Ä Ä·¥á·¥Ñ·¥õ  ü·¥á·¥õ·¥õ·¥á Ä …™…¥ ·¥õ ú·¥á ·¥° Ä·¥è…¥…¢ s·¥ò·¥è·¥õ
¬† ¬†üü•  ü·¥á·¥õ·¥õ·¥á Ä …¥·¥è·¥õ …™…¥ ·¥õ ú·¥á ·¥°·¥è Ä·¥Ö
4. “ì…™ Äs·¥õ ·¥ò·¥á Äs·¥è…¥ ·¥õ·¥è …¢·¥ú·¥áss ·¥Ñ·¥è Ä Ä·¥á·¥Ñ·¥õ ü è ·¥°…™…¥s!
5. ·¥ç·¥Äx…™·¥ç·¥ú·¥ç 30 …¢·¥ú·¥áss·¥ás ·¥ò·¥á Ä …¢·¥Ä·¥ç·¥á

** ô·¥Äs…™·¥Ñ ·¥Ñ·¥è·¥ç·¥ç·¥Ä…¥·¥Ös:**
‚Ä¢ /new - s·¥õ·¥Ä Ä·¥õ ·¥Ä …¥·¥á·¥° …¢·¥Ä·¥ç·¥á
‚Ä¢ /end - ·¥á…¥·¥Ö ·¥Ñ·¥ú Ä Ä·¥á…¥·¥õ …¢·¥Ä·¥ç·¥á (·¥†·¥è·¥õ…™…¥…¢ ·¥è Ä ·¥Ä·¥Ö·¥ç…™…¥ ·¥è…¥ ü è)
‚Ä¢ /help - s ú·¥è·¥° ·¥õ ú…™s  ú·¥á ü·¥ò ·¥ç·¥á…¥·¥ú
‚Ä¢ /daily - ·¥ò ü·¥Ä è ·¥Ö·¥Ä…™ ü è ·¥°·¥è Ä·¥Ös·¥á·¥á·¥ã (·¥ò Ä…™·¥†·¥Ä·¥õ·¥á ·¥Ñ ú·¥Ä·¥õ ·¥è…¥ ü è)
‚Ä¢ /pausedaily - ·¥ò·¥Ä·¥ús·¥á ·¥Ö·¥Ä…™ ü è ·¥ç·¥è·¥Ö·¥á ·¥Ä…¥·¥Ö …¢·¥è  ô·¥Ä·¥Ñ·¥ã ·¥õ·¥è …¥·¥è Ä·¥ç·¥Ä ü …¢·¥Ä·¥ç·¥ás
"""
    await cb.edit_message_text(text, reply_markup=InlineKeyboardMarkup([[InlineKeyboardButton("¬´  ô·¥Ä·¥Ñ·¥ã", callback_data="help_menu")]]))

@Client.on_callback_query(filters.regex("help_menu"))
async def help_menu_callback(client, cb):
    # Wapas wahi main help screen
    text = """
‚ñ∂ **…¢ Ä·¥è·¥ú·¥ò s·¥á·¥õ·¥õ…™…¥…¢s (·¥Ä·¥Ö·¥ç…™…¥ ·¥è…¥ ü è)**

**·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥á·¥Ö ·¥ús·¥á Äs**
/seekauth ‚Äì ·¥ç·¥Ä…¥·¥Ä…¢·¥á ·¥ús·¥á Äs ·¥° ú·¥è ·¥Ñ·¥Ä…¥ ·¥á…¥·¥Ö …¢·¥Ä·¥ç·¥ás ·¥°…™·¥õ ú·¥è·¥ú·¥õ ·¥Ä ·¥†·¥è·¥õ·¥á.

**·¥ús·¥Ä…¢·¥á:**
‚Ä¢ `/seekauth @username` ‚Äì ·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥á ·¥Ä ·¥ús·¥á Ä
‚Ä¢ `/seekauth remove @username` ‚Äì  Ä·¥á·¥ç·¥è·¥†·¥á ·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥Ä·¥õ…™·¥è…¥
‚Ä¢ `/rmallauth` ‚Äì  Ä·¥á·¥ç·¥è·¥†·¥á ·¥Ä ü ü ·¥Ä·¥ú·¥õ ú·¥è Ä…™·¥¢·¥á·¥Ö ·¥ús·¥á Äs

 è·¥è·¥ú ·¥Ñ·¥Ä…¥ ·¥Ä üs·¥è ·¥ús·¥á ·¥Ä ·¥ús·¥á Ä …™·¥Ö ·¥è Ä  Ä·¥á·¥ò ü è ·¥õ·¥è ·¥Ä ·¥ç·¥áss·¥Ä…¢·¥á …™…¥s·¥õ·¥á·¥Ä·¥Ö ·¥è“ì `@username`.

**…¢·¥Ä·¥ç·¥á ·¥õ·¥è·¥ò…™·¥Ñ (“ì·¥è Ä·¥ú·¥ç …¢ Ä·¥è·¥ú·¥òs)**
/setgametopic ‚Äì  Ä·¥ás·¥õ Ä…™·¥Ñ·¥õ …¢·¥Ä·¥ç·¥ás ·¥õ·¥è ·¥è…¥·¥á ·¥è Ä ·¥ç·¥è Ä·¥á ·¥õ·¥è·¥ò…™·¥Ñs
 Ä·¥ú…¥ ·¥õ ú…™s ·¥Ñ·¥è·¥ç·¥ç·¥Ä…¥·¥Ö _…™…¥s…™·¥Ö·¥á ·¥õ ú·¥á ·¥õ·¥è·¥ò…™·¥Ñ_ ·¥° ú·¥á Ä·¥á  è·¥è·¥ú ·¥°·¥Ä…¥·¥õ …¢·¥Ä·¥ç·¥ás ·¥õ·¥è  ô·¥á ·¥ò ü·¥Ä è·¥á·¥Ö.
·¥Ä“ì·¥õ·¥á Ä s·¥á·¥õ·¥õ…™…¥…¢, ·¥õ ú·¥á  ô·¥è·¥õ ·¥°…™ ü ü ·¥è…¥ ü è  Ä·¥ú…¥ …¢·¥Ä·¥ç·¥ás …™…¥ ·¥õ ú·¥Ä·¥õ ·¥õ·¥è·¥ò…™·¥Ñ.

/unsetgametopic ‚Äì  Ä·¥á·¥ç·¥è·¥†·¥á ·¥õ·¥è·¥ò…™·¥Ñ  Ä·¥ás·¥õ Ä…™·¥Ñ·¥õ…™·¥è…¥
**·¥ús·¥Ä…¢·¥á:** `/unsetgametopic`
·¥Ä“ì·¥õ·¥á Ä ·¥ú…¥s·¥á·¥õ·¥õ…™…¥…¢, ·¥õ ú·¥á  ô·¥è·¥õ ·¥Ñ·¥Ä…¥  Ä·¥ú…¥ …¢·¥Ä·¥ç·¥ás …™…¥ ·¥Ä…¥ è ·¥õ·¥è·¥ò…™·¥Ñ …™…¥ ·¥õ ú·¥á …¢ Ä·¥è·¥ú·¥ò ·¥Ä…¢·¥Ä…™…¥.
"""
    buttons = [
        [
            InlineKeyboardButton(" ú·¥è·¥° ·¥õ·¥è ·¥ò ü·¥Ä è", callback_data="how_to_play"), 
            InlineKeyboardButton(" ü·¥á·¥Ä·¥Ö·¥á Ä ô·¥è·¥Ä Ä·¥Ö & s·¥Ñ·¥è Ä·¥ás", callback_data="lb_scores")
        ],
        [
            InlineKeyboardButton("·¥è·¥°…¥·¥á Ä", url=f"tg://user?id={OWNER_ID}")
        ]
    ]
    await cb.edit_message_text(text, reply_markup=InlineKeyboardMarkup(buttons))
